{% extends "base.html" %}
{% block content %}
  <div class="flex flex-col gap-6">
    <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
      <div>
        <p class="text-sm uppercase tracking-[0.2em] text-slate-400">Browse</p>
        <h1 class="text-2xl font-semibold text-white mt-1">Saved recipes</h1>
      </div>
      <a href="/" class="text-sm text-teal-300 hover:text-teal-200">+ Import another</a>
    </div>

    <form method="get" class="flex flex-col sm:flex-row gap-3 sm:items-center">
      <label class="text-sm text-slate-300">Filter by category</label>
      <select name="category_id" class="rounded-lg bg-slate-800/80 border border-slate-700 px-3 py-2 text-white focus:border-teal-300 focus:outline-none">
        <option value="">All</option>
        {% for category in categories %}
          <option value="{{ category.id }}" {% if selected_category_id == category.id %}selected{% endif %}>{{ category.name }}</option>
        {% endfor %}
      </select>
      <button type="submit" class="rounded-lg bg-slate-800/80 border border-slate-700 px-3 py-2 text-white hover:border-teal-300">Apply</button>
    </form>

    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
      {% for recipe in recipes %}
        <a href="/recipes/{{ recipe.id }}" class="glass-card rounded-2xl border border-slate-800/60 p-4 hover:border-teal-300/50 transition block">
          {% if recipe.image_url %}
            <div class="aspect-[4/3] overflow-hidden rounded-xl mb-3 bg-slate-800">
              <img src="{{ recipe.image_url }}" alt="{{ recipe.title }}" class="w-full h-full object-cover">
            </div>
          {% endif %}
          <h2 class="text-lg font-semibold text-white">{{ recipe.title }}</h2>
          <div class="mt-2 flex flex-wrap gap-2">
            {% for category in recipe.categories %}
              <span class="chip bg-slate-800 text-slate-100 border border-slate-700" style="{% if category.color %}background: {{ category.color }}; color: #0f172a;{% endif %}">{{ category.name }}</span>
            {% endfor %}
          </div>
        </a>
      {% else %}
        <div class="text-slate-300">No recipes yet. <a href="/" class="text-teal-300">Import one</a>.</div>
      {% endfor %}
    </div>
  </div>
{% endblock %}
